# LBM 模擬參數設定檔 (詳細註解版)
# 使用單位: LBM Lattice Units (晶格單位)
# 所有的長度、時間、質量都已經無因次化

# ==========================================
# 區塊 1: 模擬基本設定
# ==========================================
simulation:
  name: "Karman Vortex (YAML Config)"

  # 網格解析度 (Resolution)
  # nx, ny 代表計算域的長寬格點數。
  # 數值越大: 模擬越精細，物理越準確，但計算越慢 (O(N^2) 複雜度)。
  nx: 1600
  ny: 400

  ghost_moments_s: 1.8 # Ghost Moments S (非物理模態鬆弛參數)
  visualization_gaussian_sigma: 1.4 # 高斯模糊 sigma 值 (視覺化用)
  smagorinsky_constant: 0.15 # Smagorinsky Constant (Cs) for LES 模型

  # -----------------------------------------------------------
  # [核心參數] 運動黏滯係數 (Kinematic Viscosity, nu)
  # -----------------------------------------------------------
  # 物理意義: 流體的「濃稠度」。影響雷諾數 (Re = U*L / niu)。
  # LBM 限制: 必須大於 0。
  #
  # ★ 調大 niu (例如 0.1 ~ 0.2):
  #    - 物理現象: 流體變得很黏 (像蜂蜜或重油)。
  #    - 流動特徵: 低雷諾數 (Low Re)，流動平滑 (層流 Laminar)，不易產生漩渦。
  #    - 數值穩定性: 非常穩定，程式幾乎不會報錯。
  #
  # ★ 調小 niu (例如 0.001 ~ 0.0001):
  #    - 物理現象: 流體變得很稀 (像水或空氣)。
  #    - 流動特徵: 高雷諾數 (High Re)，慣性力強，容易產生劇烈漩渦與紊流 (Turbulence)。
  #    - 數值穩定性: 危險！容易「炸掉」(NaN)。
  #      因為鬆弛時間 tau = 3*niu + 0.5。當 niu 趨近 0，tau 趨近 0.5。
  #      LBM 在 tau 接近 0.5 時極不穩定。
  #
  # 建議範圍: 對於此解析度，建議 0.0005 ~ 0.02 之間。
  niu: 0.002

  # 渲染頻率
  # 每更新一次畫面，背後要計算幾步？
  # 設為 1: 動畫最順滑，但模擬進度慢。
  # 設為 1000: 看起來像快轉，能快速看到穩態結果。
  steps_per_frame: 100

# ==========================================
# 區塊 2: 邊界條件 (Boundary Conditions)
# ==========================================
boundary_condition:
  # 邊界類型對應: 0 -> Dirichlet (固定速度), 1 -> Neumann (自由流出)
  # 順序: [左, 上, 右, 下]
  # 這裡設定: 左邊入口(0)，上下固壁(0)，右邊出口(1)
  type: [0, 0, 1, 0]

  # 邊界數值: [u (x方向速度), v (y方向速度)]
  # 注意: LBM 的速度是「音速 (cs)」的比例。
  # ★ 限制: 為了保持不可壓縮流假設，速度模長必須小於 0.1 (Ma < 0.1)。
  # 如果設太大 (例如 0.2 或 0.5)，模擬會失真或炸掉。
  value:
    - [0.04, 0.0] # 左 (Inlet): 向右吹風，速度 0.05
    - [0.0, 0.0] # 上 (Top Wall): 靜止牆壁
    - [0.0, 0.0] # 右 (Outlet): 類型為 1 時，此數值無效 (由內部決定)
    - [0.0, 0.0] # 下 (Bottom Wall): 靜止牆壁
CL: 36 # Characteristic Length (特徵長度)

# ==========================================
# 區塊 3: 障礙物遮罩 (Mask)
# ==========================================
mask:
  enable: true # 是否開啟障礙物
  type: "room" # 形狀類型: 圓柱
  params:
    cx: 320.0 # 圓心 X 座標 (網格位置)
    cy: 200.0 # 圓心 Y 座標 (通常設在 ny/2 置中)
    r:
      40.0 # 半徑 (Radius)
      # 半徑越大，特徵長度 L 越大，雷諾數 Re 也會變大。
