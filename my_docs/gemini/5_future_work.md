# 6. 未來工作：加入熱模擬

您最初的目標之一是最終能夠模擬風與熱的交互作用。這需要對現有的 LBM 求解器進行擴展。

## 基本思路

在格子波茲曼方法 (LBM) 框架中模擬熱傳遞，通常有兩種主流方法：

1.  **多分配函數模型 (Multi-Distribution-Function, MDF):**
    *   **概念:** 這種方法為溫度 (或內能) 引入一個**獨立的**粒子分配函數，我們稱之為 `g`。
    *   **流程:**
        1.  保留現有的流體分配函數 `f`，用它來計算流場的宏觀密度 `rho` 和速度 `v` (如現在的 `lbm_solver_3d.py` 所做的)。
        2.  建立一個新的、類似的 LBM 核心，用於溫度分配函數 `g`。這個核心會有自己的碰撞 (collision) 和串流 (streaming) 步驟。
        3.  `g` 的碰撞步驟會考慮熱源、熱邊界條件以及與流體流動的耦合 (對流項)。
        4.  從 `g` 中可以計算出宏觀的溫度 `T`。
    *   **優點:** 概念相對直接，容易在現有程式碼基礎上擴展。
    *   **缺點:** 可能會有一些穩定性問題，且需要額外的記憶體來儲存 `g`。

2.  **混合 LBM-FVM/FDM 模型 (Hybrid LBM-Finite-Volume/Difference-Method):**
    *   **概念:** 只使用 LBM 來解流場 (Navier-Stokes 方程)，而溫度場則使用傳統的**有限體積法 (FVM)** 或 **有限差分法 (FDM)** 來求解能量方程。
    *   **流程:**
        1.  LBM 步驟照舊，計算出每個時間步的流速 `v`。
        2.  將 LBM 計算出的流速 `v` 代入到一個獨立的 FVM/FDM 求解器中，作為能量方程中的對流項。
        3.  FVM/FDM 求解器計算出新的溫度場 `T`。
        4.  (可選) 如果考慮溫度對流體性質的影響 (例如，浮力驅動的自然對流)，則需要將計算出的溫度 `T` 反饋回 LBM 的力項 (force term) 中。
    *   **優點:** 兩種方法各自處理自己擅長的領域，通常更穩定、更精確。
    *   **缺點:** 實作起來更複雜，因為您需要在同一個程式中耦合兩種不同的數值方法。

## 建議的下一步

對於初學者，從 **多分配函數模型 (MDF)** 開始可能會比較容易。您可以：

1.  **研究文獻:** 查找關於 "LBM for thermal flow" 或 "Lattice Boltzmann thermal model" 的學術文章或教科書，以理解 `g` 的平衡分配函數和碰撞項的具體形式。
2.  **擴展程式碼:**
    *   在 `lbm_solver_3d.py` 中，仿照 `f` 和 `F`，建立新的 Taichi field，例如 `g` 和 `G`，以及一個溫度場 `T`。
    *   建立一個新的 Taichi kernel `colission_thermal()` 和 `streaming_thermal()`。
    *   在主迴圈中，在流體計算之後呼叫熱模擬的核心。
3.  **加入邊界條件:** 實作溫度的邊界條件，例如固定溫度 (Dirichlet) 或固定熱通量 (Neumann) 邊界。

這是一個具有挑戰性但非常有價值的擴展方向，祝您好運！
