# 4. 模擬設定

準備好幾何模型後，下一步是設定 LBM 求解器的物理參數與邊界條件，以符合您的風場模擬需求。

## 參數設定

所有的模擬參數都集中在 `Single_phase/config.yml` 檔案中，方便您統一管理。

### 主要物理參數

*   **黏滯係數 (`niu`):** 此參數與流體的雷諾數有關。對於風場模擬，您可能需要一個較小的值來模擬較高的雷諾數，以產生更真實的紊流效果。例如：`niu: 0.01`。
*   **外部力 (`fx`, `fy`, `fz`):** 這是驅動風場的主要力量。您可以設定一個 x 方向的力來模擬從左到右的風。例如：`fx: 1.0e-5`。

### 邊界條件設定

邊界條件的設定對於模擬的成敗至關重要。`config.yml` 中的 `bc_*` 參數用於設定六個邊界 (x-left, x-right, y-left, y-right, z-left, z-right) 的行為。

*   **`type`**:
    *   `0`: **週期性邊界 (periodic)** - 當流體粒子離開一個邊界時，會從對應的另一邊界以相同的狀態重新進入。適用於模擬無限延伸的空間。
    *   `1`: **固定壓力邊界 (fix pressure)** - 在該邊界上維持一個固定的壓力 (密度 `rho`) 值。常用於出口邊界，讓流體可以自然流出。
    *   `2`: **固定速度邊界 (fix velocity)** - 在該邊界上維持一個固定的速度 (`vx`, `vy`, `vz`)。常用於入口邊界，以設定風的來向與速度。

**範例：模擬由左向右吹的風**

假設風是從 x 軸的左邊吹向右邊：

*   **入口 (x-left):** 設定為 "固定速度邊界" (`type: 2`)，並給定一個 x 方向的速度。
    ```yaml
    bc_x_left:
      type: 2
      rho: 1.0
      vx: 1.0e-2  # 設定入口風速
      vy: 0.0
      vz: 0.0
    ```
*   **出口 (x-right):** 設定為 "固定壓力邊界" (`type: 1`)，讓空氣可以自由流出。
    ```yaml
    bc_x_right:
      type: 1
      rho: 1.0    # 設定出口壓力
      vx: 0.0
      vy: 0.0
      vz: 0.0
    ```
*   **側面 (y-left, y-right, z-top):** 建議設定為 "週期性邊界" (`type: 0`) 或 "滑移邊界" (本專案未直接提供，但可透過設定實現)，來模擬一個無限寬廣的空間。
    ```yaml
    bc_y_left:
      type: 0
      # ...
    bc_y_right:
      type: 0
      # ...
    ```
*   **地面 (z-bottom):** 地面應為固體，這已由 `voxelize_geometry.py` 處理。如果您的 STL 包含地面，它會被體素化為固體；如果沒有，您可能需要在幾何處理階段手動加入一個固體平面。
